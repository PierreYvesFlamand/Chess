function move_pawn(e,o){for(i=0;i<Pawns[currentPlayer].length;i++)for(j=0;j<Pawns[currentPlayer][i].length;j++){const t=Pawns[currentPlayer][i][j];if(t.id==e.id){grid[e.y][e.x]=null,grid[o.y][o.x]=t,t.x=o.x,t.y=o.y,document.getElementById(e.id).style.gridArea=get_letter(o.y)+(o.x+1),"rook"===t.moveType&&t.first_move&&(t.first_move=!1),"king"===t.moveType&&t.first_move&&(t.first_move=!1),i=Pawns[currentPlayer].length;break}}if(null!=o.kill){for(playerToKill=currentPlayer?0:1,i=0;i<Pawns[playerToKill].length;i++)for(j=0;j<Pawns[playerToKill][i].length;j++){if(Pawns[playerToKill][i][j].id==o.kill.id){document.getElementById(o.kill.id).style.display="none",i=Pawns[playerToKill].length;break}}"king-w"==o.kill.id&&toggleModal({modal:"end",winner:"Black"}),"king-b"==o.kill.id&&toggleModal({modal:"end",winner:"White"})}if("pawn"===e.moveType&&o.y==(currentPlayer?7:0)&&toggleModal({modal:"promotion",pawnToPromote:e}),void 0!==o.castle){let e={};switch(o.castle){case 0:e.i=1,e.j=1,e.k=0,e.x=0,e.y=0,e.x_to_do=3,e.y_to_do=0;break;case 1:e.i=1,e.j=1,e.k=1,e.x=7,e.y=0,e.x_to_do=5,e.y_to_do=0;break;case 2:e.i=0,e.j=1,e.k=0,e.x=0,e.y=7,e.x_to_do=3,e.y_to_do=7;break;case 3:e.i=0,e.j=1,e.k=1,e.x=7,e.y=7,e.x_to_do=5,e.y_to_do=7;break;default:console.error("Switch error")}Pawns[e.i][e.j][e.k].first_move=!1,grid[e.y][e.x]=null,grid[e.y_to_do][e.x_to_do]=Pawns[e.i][e.j][e.k],Pawns[e.i][e.j][e.k].x=e.x_to_do,Pawns[e.i][e.j][e.k].y=e.y_to_do,document.getElementById(Pawns[e.i][e.j][e.k].id).style.gridArea=get_letter(e.y_to_do)+(e.x_to_do+1)}next_turn()}function get_letter(e){return["A","B","C","D","E","F","G","H"][e]}function pawn_promotion(e,o){const t=currentPlayer?0:1;document.getElementById(e.id).innerHTML='<i class="fas fa-chess-'+o+'"></i>';for(let i=0;i<Pawns[t][0].length;i++){const l=Pawns[t][0][i];if(l.id===e.id){l.moveType=o,i=Pawns[t][0].length;break}}}